
FUNCTION get_next_line()

	DECLARE STATIC MAIN_BUF;
	DECLARE TEMP_BUF;

	// allocate memory for MAIN_BUF
	INITIALIZE MAIN_BUF
		IF NO MAIN_BUF
			RETURN NULL;
		ENDIF

	// iterate up to the EOF
	WHILE SMTH TO READ

		// call read()
		READ FD AND EXTRACT CHUNK OF DATA TO TEMP_BUF;
			IF ERROR OR EMPTY
				RETURN LEFTOVER FROM MAIN_BUF;
					IF NO LEFTOVER
						RETURN NULL;
					ENDIF
			ENDIF

		APPEND DATA TO MAIN_BUF
			IF NO DATA
				BREAK;
			ENDIF

		FIND A NULL-TERMINATED LINE
			IF LINE
				ALLOCATE MEMORY FOR THE LINE;
				COPY DATA TO MEMORY;
				RETURN THE LINE;
				FREE MEMORY;
				CHECK IF DATA INSIDE MAIN_BUF AFTER THE LINE RETURN
					IF DATAT
						SHIFT DATA INSIDE MAIN_BUF;
					ELSE .......


			ENDIF

		CLEAN UP TEMP_BUF;



	ENDWHILE

	// if nothing to read
	RETURN NULL

END FUNCTION

